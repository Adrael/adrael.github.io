"use strict";function ProtectIt(){var e=128;var t=e;var n=undefined;this.buildCharset=function(){var e="absdefghijklmnopqrstuvwxyz";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var n="0123456789";var r="&â‚¬#/\\)($*!<>+-=";var i=[];var s=document.getElementById("symbols").checked||document.getElementById("uppercase").checked||document.getElementById("numbers").checked||document.getElementById("lowercase").checked;if(s){if(document.getElementById("symbols").checked)i.push(r);if(document.getElementById("uppercase").checked)i.push(t);if(document.getElementById("numbers").checked)i.push(n);if(document.getElementById("lowercase").checked)i.push(e)}else{alert('None of the "Composition" part\'s checkboxes are selected!\nLowercase will be default choice.');document.getElementById("lowercase").checked=true;i.push(e)}return i};this.rollActions=function(){var e=this;var t=$("#userInput").val().trim();if(t.length>0){setTimeout(function(){e.makeNormalQRCodeAndVisualHash();e.spellPassword(t);e.calculatePasswordComplexityToCrack();e.updateLengthField();$(function(){$("#userInput").complexify({},function(e,t){if(!e){$("#progress").css({width:t+"%"}).removeClass("progressbarValid").removeClass("progressbarMiddle").addClass("progressbarInvalid")}else if(Math.round(t)>=40&&Math.round(t)<=65){$("#progress").css({width:t+"%"}).removeClass("progressbarInvalid").removeClass("progressbarValid").addClass("progressbarMiddle")}else{$("#progress").css({width:t+"%"}).removeClass("progressbarInvalid").removeClass("progressbarMiddle").addClass("progressbarValid")}$("#complexity").html(Math.round(t)+"%")})});$("#userInput").keyup()},100)}};this.updateLengthField=function(){var e=document.getElementById("userInput").value.length;document.getElementById("spinbox").value=e>0?e:16};this.calculatePasswordComplexityToCrack=function(){strengthMeter("userInput",document.getElementById("nodes").value)};this.generatePassword=function(){var e=document.getElementById("userInput");var t=document.getElementById("spinbox").value;var n=this.buildCharset();var r="",i="";if(t<0)t=2;if(t>128)t=128;for(var s=0;s<t;++s){i=n[Math.floor(Math.random()*n.length)];r+=i.charAt(Math.floor(Math.random()*i.length))}e.value=r;e.blur();this.rollActions()};this.spellPassword=function(e){if(document.getElementById("spellPassword").checked&&e.length>0){document.getElementById("spellerDiv").style.display="initial";var t=["Apache","Beach","Colorado","Dalton","East","Friend","Glad","Hipopotamus","Illinois","Jack","Kilos","Light","March","North","Octal","Pint","Quantum","Rare","South","Tim","Upper","Vibe","West","Xeno","Yes","Zebra"];var n=["alabama","bike","cat","done","epic","fail","grocery","high","itchy","john","koala","low","man","new","off","plural","queue","rich","slow","tiny","use","view","wear","xylophone","youth","zookeeper"];var r=[];e:for(var i=0;i<e.length;++i){var s=false;for(var o=0;o<t.length;++o){if(t[o].charAt(0)===e.charAt(i)){r.push(t[o]);continue e}}for(var u=0;u<n.length;++u){if(n[u].charAt(0)===e.charAt(i)){s=true;r.push(n[u]);break}}if(!s){r.push(e.charAt(i))}}document.getElementById("spellerInput").value=r.join(" ")}else{document.getElementById("spellerDiv").style.display="none"}};this.displayOrHidePassword=function(){var e=document.getElementById("userInput");var t=document.getElementById("spellPassword");var n=document.getElementById("spellerDiv");if(e.getAttribute("type")==="password"){e.setAttribute("type","text");t.removeAttribute("disabled");this.spellPassword()}else{e.setAttribute("type","password");t.setAttribute("disabled","");t.checked=false;n.style.display="none"}};this.clearPassword=function(){var e=document.getElementById("userInput");e.value="";this.rollActions();e.focus()};this.copyToClipboard=function(){alert('After clicking "OK", all you have to do is pressing Ctrl + C !');var e=document.getElementById("userInput");e.setAttribute("type","text");e.select();e.focus()};this.readOnlyOrWritePassword=function(){var e=document.getElementById("userInput");if(e.readOnly){e.removeAttribute("readonly")}else{e.setAttribute("readonly","")}};this.makeQRCode=function(r,i,s){try{var o=Sha256.hash(document.getElementById("userInput").value);var u=document.getElementById("hashes");if(o.length>0&&i){if(r){u.removeChild(r);r=null}if(!r){r=document.createElement("div");r.id="qrcode";n=new QRCode(r,{width:e,height:t});if(!s){var a=document.createElement("div");a.setAttribute("id","qrCSpacer");a.setAttribute("class","col-md-2");u.appendChild(a)}else{var a=document.getElementById("qrCSpacer");if(a)u.removeChild(a)}u.appendChild(r)}n.makeCode(o);r.style.display="initial"}else if(r){r.style.display="none"}}catch(f){u.removeChild(r);var l=document.createElement("div");l.id="qrcode";l.setAttribute("data_fail");var c=document.createElement("img");c.setAttribute("src","img/qrcode_failure.png");l.appendChild(c);u.appendChild(l);alert("QRCode error:\n"+f.message)}};this.makeVisualHash=function(n,r){if(vizhash.supportCanvas()){var i=document.getElementById("userInput").value;var s=document.getElementById("hashes");try{var o=vizhash.canvasHash(i,e,t);if(i.length>0&&r){if(n){s.removeChild(n)}o.canvas.id="visualhash";s.appendChild(o.canvas)}else if(n){n.style.display="none"}}catch(u){alert("VizHash error:\n"+u.message)}}};this.makeNormalQRCodeAndVisualHash=function(){var e=document.getElementById("qrcodehash").checked;var t=document.getElementById("vishash").checked;var n=document.getElementById("userInput").value;if((e||t)&&n.length>0){document.getElementById("hashes").style.display="initial";document.getElementById("hashesLabel").style.display="-webkit-inline-box";try{this.makeQRCode(document.getElementById("qrcode"),e,t);this.makeVisualHash(document.getElementById("visualhash"),t)}catch(r){alert(r.message)}}else{document.getElementById("hashes").style.display="none";document.getElementById("hashesLabel").style.display="none"}};this.initialization=function(){document.getElementById("userInput").focus();document.getElementById("spellerDiv").style.display="none";this.calculatePasswordComplexityToCrack()}}var PI=new ProtectIt;PI.initialization()