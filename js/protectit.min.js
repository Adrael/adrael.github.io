"use strict";function ProtectIt(){var e=128;var t=e;var n=undefined;this.buildCharset=function(){var e="absdefghijklmnopqrstuvwxyz";var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";var n="0123456789";var r="&â‚¬#/\\)($*!<>+-=";var i=[];if(document.getElementById("symbols").checked)i.push(r);if(document.getElementById("uppercase").checked)i.push(t);if(document.getElementById("numbers").checked)i.push(n);if(document.getElementById("lowercase").checked||i.length===0)i.push(e);return i};this.rollActions=function(){var e=this;setTimeout(function(){e.makeNormalQRCodeAndVisualHash();e.spellPassword(document.getElementById("userInput").value);e.calculatePasswordComplexityToCrack();e.updateLengthField();$(function(){$("#userInput").complexify({},function(e,t){if(!e){$("#progress").css({width:t+"%"}).removeClass("progressbarValid").removeClass("progressbarMiddle").addClass("progressbarInvalid")}else if(Math.round(t)>=40&&Math.round(t)<=65){$("#progress").css({width:t+"%"}).removeClass("progressbarInvalid").removeClass("progressbarValid").addClass("progressbarMiddle")}else{$("#progress").css({width:t+"%"}).removeClass("progressbarInvalid").removeClass("progressbarMiddle").addClass("progressbarValid")}$("#complexity").html(Math.round(t)+"%")})});$("#userInput").keyup()},100)};this.updateLengthField=function(){var e=document.getElementById("userInput").value.length;document.getElementById("spinbox").value=e>0?e:16};this.calculatePasswordComplexityToCrack=function(){strengthMeter("userInput",document.getElementById("nodes").value)};this.generatePassword=function(){var e=document.getElementById("userInput");var t=document.getElementById("spinbox").value;var n=this.buildCharset();var r="",i="";if(t<0)t=2;if(t>128)t=128;for(var s=0;s<t;++s){i=n[Math.floor(Math.random()*n.length)];r+=i.charAt(Math.floor(Math.random()*i.length))}e.value=r;e.blur();this.rollActions()};this.spellPassword=function(e){if(document.getElementById("spellPassword").checked&&e.length>0){document.getElementById("spellerDiv").style.display="initial";var t=["Apache","Beach","Colorado","Dalton","East","Friend","Glad","Hipopotamus","Illinois","Jack","Kilos","Light","March","North","Octal","Pint","Quantum","Rare","South","Tim","Upper","Vibe","West","Xeno","Yes","Zebra"];var n=["alabama","bike","cat","done","epic","fail","grocery","high","itchy","john","koala","low","man","new","off","plural","queue","rich","slow","tiny","use","view","wear","xeno","youth","zebra"];var r="";for(var i=0;i<e.length;++i){var s=false;for(var o=0;o<t.length;++o){if(t[o].charAt(0)===e.charAt(i)){s=true;r+=(r.length>0?" ":"")+t[o];break}}if(s){continue}for(var u=0;u<n.length;++u){if(n[u].charAt(0)===e.charAt(i)){s=true;r+=(r.length>0?" ":"")+n[u];break}}if(!s){r+=(r.length>0?" ":"")+e.charAt(i)}}document.getElementById("spellerInput").value=r}else{document.getElementById("spellerDiv").style.display="none"}};this.displayOrHidePassword=function(){var e=document.getElementById("userInput");if(e.getAttribute("type")==="password"){e.setAttribute("type","text")}else{e.setAttribute("type","password")}};this.clearPassword=function(){var e=document.getElementById("userInput");e.value="";this.rollActions();e.focus()};this.copyToClipboard=function(){alert('After clicking "OK", all you have to do is pressing Ctrl + C !');var e=document.getElementById("userInput");e.setAttribute("type","text");e.select();e.focus()};this.readOnlyOrWritePassword=function(){var e=document.getElementById("userInput");if(e.readOnly){e.removeAttribute("readonly")}else{e.setAttribute("readonly")}};this.makeQRCode=function(r,i){try{var s=Sha256.hash(document.getElementById("userInput").value);var o=document.getElementById("hashes");if(s.length>0&&i){if(r&&r.getAttribute("data_fail")){o.removeChild(r);r=null}if(!r){r=document.createElement("div");r.id="qrcode";n=new QRCode(r,{width:e,height:t});o.appendChild(r)}n.makeCode(s);r.style.display="initial"}else if(r){r.style.display="none"}}catch(u){o.removeChild(r);var a=document.createElement("div");a.id="qrcode";a.setAttribute("data_fail");var f=document.createElement("img");f.setAttribute("src","img/qrcode_failure.png");a.appendChild(f);o.appendChild(a);alert("QRCode error:\n"+u.message)}};this.makeVisualHash=function(n,r){if(vizhash.supportCanvas()){var i=document.getElementById("userInput").value;var s=document.getElementById("hashes");try{var o=vizhash.canvasHash(i,e,t);if(i.length>0&&r){if(n){s.removeChild(n)}o.canvas.id="visualhash";s.appendChild(o.canvas)}else if(n){n.style.display="none"}}catch(u){alert("VizHash error:\n"+u.message)}}};this.makeNormalQRCodeAndVisualHash=function(){var e=document.getElementById("qrcodehash").checked;var t=document.getElementById("vishash").checked;var n=document.getElementById("userInput").value;if((e||t)&&n.length>0){document.getElementById("hashes").style.display="initial";document.getElementById("hashesLabel").style.display="-webkit-inline-box";try{this.makeQRCode(document.getElementById("qrcode"),e);this.makeVisualHash(document.getElementById("visualhash"),t)}catch(r){alert(r.message)}}else{document.getElementById("hashes").style.display="none";document.getElementById("hashesLabel").style.display="none"}};this.initialization=function(){document.getElementById("userInput").focus();document.getElementById("spellerDiv").style.display="none";this.calculatePasswordComplexityToCrack()}}var PI=new ProtectIt;PI.initialization()